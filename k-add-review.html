<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bus Review Page</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <link rel="stylesheet" href="css/k-add-review.css" />
    <link rel="stylesheet" href="css/k-login.css" />
    <link rel="stylesheet" href="css/Home.css" />
  </head>
  <body>
    <section id="top-bar">
      <div class="container">
        <div class="row contact-info">
          <div class="col-12 col-sm-4 col-md-3 our">
            <span>WELCOME TO OUR BUS!</span>
          </div>

          <div class="col-12 col-sm-8 col-md-5 info">
            <span>example123@gmail.com</span>
            <span>+91 8405820412</span>
          </div>
        </div>
      </div>
    </section>
    <!-- Header Section -->
    <section id="header">
      <div class="container">
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
          <div class="container-fluid">
            <div class="logo">
              <h1>LOGO</h1>
            </div>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
              <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                  <a href="Home.html">Home</a>
                </li>
                <li class="nav-item">
                  <a href="J_about-us.html">About Us</a>
                </li>
                <li class="nav-item dropdown">
                  <a href="J_contact-us.html">Contact Us</a>
                </li>
              </ul>
            </div>

            <div class="d-flex d-lg-flex flex-xl-column">
              <div class="text-end">
                <div class="account-btn">
                  <button><i class="fa-solid fa-user"></i> Account</button>
                </div>
              </div>
              <button
                class="navbar-toggler"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent"
                aria-expanded="false"
                aria-label="Toggle navigation"
              >
                <span class="navbar-toggler-icon"></span>
              </button>
            </div>
          </div>
        </nav>
      </div>
    </section>

    <div class="container my-5">
      <h2 class="text-center mb-2">Rate & Review</h2>
      <p class="text-center text-muted mb-5">
        Share your experience! Your feedback helps us improve and assist other
        travelers<br />
        in making the best choices.
      </p>

      <div class="row">
        <div class="col-md-5">
          <div class="card">
            <div class="card-header bg-light">Trip Summary</div>
            <div class="card-body">
              <div class="row k-border-bottom">
                <div class="col-6">
                  <strong>Surat</strong>
                  <div class="text-muted">Shyamdham Mandir, Jakatnaka</div>
                </div>
                <div class="col-6 pb-2 text-end">
                  <strong>Ankleshwar</strong>
                  <div class="text-muted">Lalita Chowkdi</div>
                </div>
              </div>
              <div class="k-border-bottom">
                <div class="pb-2 pt-2">
                  <strong>Booking ID:</strong> HHY545468H656
                </div>
                <div class="pb-2">
                  <strong>Date & Time:</strong> 10 Feb 2025 10:00 AM
                </div>
              </div>
              <div class="mb-2 pt-2">
                <strong>Bus Operator:</strong> Shree Nath Travels
              </div>
              <div><strong>Seat(s):</strong> 32 • 33 • 34</div>
            </div>
          </div>
        </div>

        <div class="col-md-7 k-box-shadow">
          <div class="rating-section">
            <div class="d-flex justify-content-between align-items-center mb-3">
              <span>Bus quality</span>
              <div class="star-rating">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
              </div>
            </div>
            <div class="d-flex justify-content-between align-items-center mb-3">
              <span>Driving</span>
              <div class="star-rating">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
              </div>
            </div>
            <div class="d-flex justify-content-between align-items-center mb-3">
              <span>Seat Comfort</span>
              <div class="star-rating">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star star-empty"></i>
              </div>
            </div>
            <div class="d-flex justify-content-between align-items-center mb-3">
              <span>Safety and Hygiene</span>
              <div class="star-rating">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star star-empty"></i>
                <i class="fas fa-star star-empty"></i>
                <i class="fas fa-star star-empty"></i>
              </div>
            </div>
            <div class="d-flex justify-content-between align-items-center mb-3">
              <span>Cleanliness</span>
              <div class="star-rating">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star star-empty"></i>
                <i class="fas fa-star star-empty"></i>
              </div>
            </div>
            <div class="d-flex justify-content-between align-items-center mb-3">
              <span>Female Friendly</span>
              <div class="star-rating">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star star-empty"></i>
                <i class="fas fa-star star-empty"></i>
                <i class="fas fa-star star-empty"></i>
              </div>
            </div>
            <div class="d-flex justify-content-between align-items-center mb-4">
              <span>Punctuality</span>
              <div class="star-rating">
                <i class="fas fa-star"></i>
                <i class="fas fa-star star-empty"></i>
                <i class="fas fa-star star-empty"></i>
                <i class="fas fa-star star-empty"></i>
                <i class="fas fa-star star-empty"></i>
              </div>
            </div>

            <div class="form-group mb-4">
              <textarea
                class="form-control"
                rows="4"
                placeholder="Add Description.."
              ></textarea>
            </div>

            <div class="text-center">
              <button class="cancel-btn me-2">Cancel</button>
              <button class="k-submit">Submit</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script type="module" src="./js/global-auth.js"></script>

    <script>
      function initStarRating() {
        // Select all rating containers
        const ratingContainers = document.querySelectorAll(".star-rating");

        // Loop through each rating container
        ratingContainers.forEach((container) => {
          const stars = container.querySelectorAll("i");
          const categoryName =
            container.parentElement.querySelector("span").textContent;

          // Add event listeners to each star
          stars.forEach((star, index) => {
            // Mouseover event to show preview of rating
            star.addEventListener("mouseover", () => {
              // Fill stars up to the hovered one
              for (let i = 0; i <= index; i++) {
                stars[i].className = "fas fa-star";
                stars[i].style.color = "#ffd700";
              }
              // Empty stars after the hovered one
              for (let i = index + 1; i < stars.length; i++) {
                stars[i].className = "fas fa-star star-empty";
                stars[i].style.color = "#ddd";
              }
            });

            // Mouseout event to reset the preview
            container.addEventListener("mouseout", () => {
              // Get current rating (look for data attribute)
              const currentRating = parseInt(
                container.getAttribute("data-rating") || 0
              );

              // Reset stars based on current rating
              stars.forEach((s, i) => {
                if (i < currentRating) {
                  s.className = "fas fa-star";
                  s.style.color = "#ffd700";
                } else {
                  s.className = "fas fa-star star-empty";
                  s.style.color = "#ddd";
                }
              });
            });

            // Click event to set the rating
            star.addEventListener("click", () => {
              // Set the rating (1-based index for user-friendly rating)
              const rating = index + 1;
              container.setAttribute("data-rating", rating);

              // Fill stars up to the clicked one
              for (let i = 0; i <= index; i++) {
                stars[i].className = "fas fa-star";
                stars[i].style.color = "#ffd700";
              }
              // Empty stars after the clicked one
              for (let i = index + 1; i < stars.length; i++) {
                stars[i].className = "fas fa-star star-empty";
                stars[i].style.color = "#ddd";
              }

              console.log(`${categoryName} rated ${rating} stars`);
            });
          });
        });
      }

      // Function to collect all ratings and submit review
      function submitReview() {
        const reviewData = {
          categories: {},
          description: document.querySelector("textarea").value,
        };

        // Collect all ratings
        const ratingContainers = document.querySelectorAll(".star-rating");
        ratingContainers.forEach((container) => {
          const categoryName = container.parentElement
            .querySelector("span")
            .textContent.trim();
          const rating = parseInt(container.getAttribute("data-rating") || 0);
          reviewData.categories[categoryName] = rating;
        });

        console.log("Review submitted:", reviewData);
        // Here you would typically send the data to your server
        alert("Thank you for your review!");
      }

      // Initialize when DOM is loaded
      document.addEventListener("DOMContentLoaded", () => {
        initStarRating();

        // Add event listener to submit button
        const submitButton = document.querySelector(".k-submit");
        submitButton.addEventListener("click", submitReview);

        // Add event listener to cancel button
        const cancelButton = document.querySelector(".cancel-btn");
        cancelButton.addEventListener("click", () => {
          if (confirm("Are you sure you want to cancel your review?")) {
            window.location.href = "index.html"; // or wherever you want to redirect
          }
        });
      });
    </script>
  </body>
</html>
